<div class="createEjercicio">
  <div class="cerrar">
    <button mat-icon-button (click)="cerrar()"  >
      <mat-icon style="color: antiquewhite;" >close</mat-icon>
    </button>
  </div>

  <div class="tittle-ejercicio">
    {{tittleName}}
  </div>
  <div class="scroll-container">
    <form [formGroup]="ejercicioForm" (ngSubmit)="onSubmit()" class="form-container">
      <div class="contet-input">
        <div class="row">Nombre del ejercicio</div>
        <div class="form-field">
            <input matInput formControlName="name" class="field-input">
            <mat-error class="Error" *ngIf="(submitted || ejercicioForm.get('name')?.touched) && ejercicioForm.get('name')?.hasError('required')">
              *Campo requerido
            </mat-error> 
        </div>
      </div>

      <div class="contet-input">
        <div class="row">Abreviatura</div>
        <div class="form-field">
            <input matInput formControlName="abbreviation" class="field-input">
            <mat-error class="Error" *ngIf="(submitted || ejercicioForm.get('abbreviation')?.touched) && ejercicioForm.get('abbreviation')?.hasError('required')">
              *Campo requerido
            </mat-error>
        </div>
      </div>

      <div class="contet-input">
        <div class="row">descripci칩n</div>
        <div class="form-field">
            <textarea matInput  formControlName="description" class="field-input" style="height: 45px;"></textarea>
            <mat-error class="Error" *ngIf="(submitted || ejercicioForm.get('description')?.touched) && ejercicioForm.get('description')?.hasError('required')">
              *Campo requerido
            </mat-error>
        </div>
      </div>

      <div class="content-select">
        <div class="row-select"> 
          <span> <button (click)="openCrearSubgrupo()" class="crearSubgr"> crear </button> </span> <span> Subgrupo </span>
         </div>
        <div class="select">
            <mat-select formControlName="subgrupo" name="subgrupo" class="field-select">
              <mat-option *ngFor="let opcion of dataSubgrupo" [value]="opcion.ID">
                {{ opcion.NameSubGrupo }}
              </mat-option>
            </mat-select>
            <mat-error class="Error" *ngIf="(submitted || ejercicioForm.get('subgrupo')?.touched) && ejercicioForm.get('subgrupo')?.hasError('required')">
              *Campo requerido
            </mat-error>
        </div>
      </div>

      <div class="content-select">
        <div class="row-select"> 
         <span> Tipo de relaci칩n</span>
         </div>
        <div class="select">
            <mat-select formControlName="relationship" name="relationship" class="field-select">
              <mat-option *ngFor="let opcion of dataTypeRelation" [value]="opcion.code">
                {{ opcion.name }}
              </mat-option>
            </mat-select>
            <mat-error class="Error" *ngIf="(submitted || ejercicioForm.get('relationship')?.touched) && ejercicioForm.get('relationship')?.hasError('required')">
              *Campo requerido
            </mat-error>
        </div>
      </div>
      <div class="content-select">
        <div class="row-select"> 
          <span> U. de cantidad </span>
         </div>
        <div class="select">
            <mat-select formControlName="cantidad" name="cantidad" class="field-select">
              <mat-option *ngFor="let opcion of dataUnitsofmeasurements" [value]="opcion.ID">
                {{ opcion.Name }} ({{opcion.Abbreviation}})
              </mat-option>
            </mat-select>
            <mat-error class="Error" *ngIf="(submitted || ejercicioForm.get('cantidad')?.touched) && ejercicioForm.get('cantidad')?.hasError('required')">
              *Campo requerido
            </mat-error>
        </div>
      </div>
      <div class="content-select">
        <div class="row-select"> 
          <span> Calidad/desempe침o </span>
         </div>
        <div class="select">
            <mat-select formControlName="calidadPromedio" name="calidadPromedio" class="field-select">
              <mat-option *ngFor="let opcion of dataUnitsofmeasurements" [value]="opcion.ID">
                {{ opcion.Name }} ({{opcion.Abbreviation}})
              </mat-option>
            </mat-select>
            <mat-error class="Error" *ngIf="(submitted || ejercicioForm.get('calidadPromedio')?.touched) && ejercicioForm.get('calidadPromedio')?.hasError('required')">
              *Campo requerido
            </mat-error>
            <mat-error class="Error" *ngIf="ejercicioForm.get('cantidad')?.value == ejercicioForm.get('calidadPromedio')?.value
             && ejercicioForm.get('calidadPromedio')?.value != null" 
            >
              *U. de cantidad y Calidad/desempe침o no pueden tener las mismas unidades
            </mat-error>
        </div>
      </div>

      <div class="contet-input" style="padding-top: 18px;">
        <div class="input-file">
            <input type="file" id="upload" accept=".png, .jpg, .webp" (change)="onFilesSelected($event)" hidden />
            <label for="upload" class="uploadlabel" *ngIf="!selectedImageURL">
                <mat-icon class="icon">upload_file</mat-icon>
            </label>
            <label  *ngIf="!selectedImageURL">
              <div class="textImg">Subir foto o video del ejercicio</div>
            </label>
            <label class="content-image" *ngIf="selectedImageURL">
              <div class="nameImage">    {{selectedFiles.name}}</div>  <div><button class="button-image" (click)="removeImage()"> X </button></div>
            </label>
        </div>
      </div>
      <div class="botonCrearContent">
        <button type="button" mat-button class="botonCrear" (click)="submitted = true; onCreateEjercicio()">Crear ejercicio</button>
      </div>
    </form>
  </div>

</div>